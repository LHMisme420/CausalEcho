import cv2
def detect_deepfake_frame(frame):
    # Artifact detection via frequency analysis
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    dct = cv2.dct(np.float32(gray) / 255.0)
    return np.mean(dct[::2, ::2])  # High-freq anomalies indicate fake
import cv2
import numpy as np
from pytesseract import image_to_string  # pip install pytesseract (local only)

def detect_watermark_logo(image):
    # Preprocess for text detection
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
    # Simple thresholding to grab dark text on light bg
    _, thresh = cv2.threshold(gray, 200, 255, cv2.THRESH_BINARY_INV)
    # OCR for "AI" or "Gemini"
    text = image_to_string(thresh).lower()
    if 'ai' in text or 'gemini' in text:
        return 1.0  # High fake score
    # Fallback: Contour detection for pill/box shapes
    contours, _ = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
    for cnt in contours:
        area = cv2.contourArea(cnt)
        if 50 < area < 500:  # Typical logo size
            return 0.8  # Suspicious
    return 0.0

# In extract_features:
watermark_score = detect_watermark_logo(frame)  # Or avg over frames
features['watermark_suspicion'] = watermark_score
